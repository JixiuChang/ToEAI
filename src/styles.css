/*
 * ToEAI – Global styles and theme
 * Dark UI with soft purple/pink highlights.
 * Sidebar scales with monitor size via --sidebar-w (clamp).
 */

:root {
  --bg-0: #0f0e11;
  --bg-1: #14121a;

  --panel:   #1b1723;
  --panel-2: #231c2d;

  --text:  #ece8f6;
  --muted: #b6adc6;

  --border:  #2a2333;
  --accent:  #b27bff;
  --accent-2:#ffb3e6;
  --accent-3:#9c6adf;

  --success:#69db7c;
  --danger: #ff6b6b;

  /* ~half width sidebar */
  --sidebar-w: clamp(180px, 12vw, 210px);
}

* { box-sizing: border-box; }
html, body, #app { height: 100%; }

body {
  margin: 0;
  font-family: 'Nunito', Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
               Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
  background: linear-gradient(180deg, var(--bg-0), var(--bg-1));
  color: var(--text);
}

/* Buttons */
.button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  color: var(--text) !important;              /* ensure white text */
  border: 1px solid var(--border);
  padding: 0.55rem 0.8rem;
  border-radius: 0.9rem;
  cursor: pointer;
  user-select: none;
  transition: transform .05s ease, background .15s ease, border-color .15s ease;
}
.button:hover { border-color: var(--accent-3); }
.button:active { transform: translateY(1px); }
.button.primary {
  background: linear-gradient(180deg, rgba(178,123,255,.25), rgba(255,179,230,.18));
  border-color: var(--accent-3);
}
.button.ghost { background: transparent; border: 1px solid var(--border); color: var(--text) !important; }
.button.danger { border-color: var(--danger); color: var(--danger) !important; }

/* Inputs */
.input, textarea {
  width: 100%;
  background: var(--panel);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 0.9rem;
  padding: 0.8rem 1rem;
}

.separator { height: 1px; background: var(--border); width: 100%; }

/* Layout */
.layout {
  height: 100vh;
  display: grid;
  grid-template-columns: var(--sidebar-w) 1fr;
}

/* Sidebar */
.sidebar {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border-right: 1px solid var(--border);
  width: var(--sidebar-w);
}
.sidebar__head { display: none; }
.sidebar__list {
  flex: 1; overflow: auto; padding: 0.5rem 0; padding-top: 0.25rem;
}

/* Centered, slightly narrower buttons so rounded edges show */
.nav-buttons {
  display: flex; flex-direction: column; gap: 0.6rem; padding: 0.75rem 0.5rem;
}
.nav-buttons .button {
  width: calc(100% - 16px);
  margin: 0 auto;
  justify-content: flex-start;
}

/* Gradient */
.gradient-btn {
  background: linear-gradient(90deg, rgba(178,123,255,.55), rgba(255,179,230,.45));
  border-color: var(--accent-3);
  color: var(--text) !important;   /* keep text white on gradient */
}

/* Session rows — centered and narrower than sidebar */
.sidebar__item {
  display: grid; grid-template-columns: 1fr auto; align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 0.9rem;
  margin: 0.35rem auto;             /* center */
  width: calc(100% - 16px);         /* clamp width under sidebar */
  max-width: calc(100% - 16px);
  border-radius: 0.9rem;
  border: 1px solid var(--border);

  /* Unselected look */
  background: linear-gradient(180deg, rgba(35,28,45,.55), rgba(27,23,35,.55));
  color: var(--text);
}
.sidebar__item:hover { border-color: var(--accent-3); }

/* Selected chat = gradient highlight (and white text) */
.sidebar__item.active {
  background: linear-gradient(90deg, rgba(178,123,255,.55), rgba(255,179,230,.45));
  border-color: var(--accent-3);
  box-shadow: 0 0 0 1px rgba(178,123,255,.25) inset;
  color: var(--text);
}
.sidebar__item .title-1 { color: var(--text); }
.sidebar__item.active .title-1 { color: var(--text); }
.sidebar__item .muted,
.sidebar__item small { color: var(--muted); font-size: 0.8rem; }

/* Truncation helper */
.title-1 {
  display: block; max-width: 100%;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* Main panel */
.main { height: 100vh; display: grid; grid-template-rows: auto 1fr auto; }

/* Topbar */
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0.8rem 1rem;
  border-bottom: 1px solid var(--border);
  background: rgba(0,0,0,.2);
  backdrop-filter: blur(6px);
}
.topbar__title { font-weight: 700; letter-spacing: .2px; }
.topbar__right { display: flex; gap: 0.5rem; align-items: center; }

/* Chat area */
.chat { position: relative; display: flex; flex-direction: column; height: 100%; overflow: hidden; }
.messages { flex: 1; overflow-y: auto; padding: 1rem 1rem 2rem; scroll-behavior: smooth; }
.msg-wrap { max-width: 900px; width: 100%; margin: 0 auto; }
.msg { width: 100%; margin: 10px 0; }
.bubble {
  display: inline-block; max-width: min(720px, 100%);
  border-radius: 14px; border: 1px solid var(--border);
  padding: 12px 14px; line-height: 1.55; white-space: pre-wrap; word-break: break-word;
  box-shadow: 0 0 0 1px rgba(178,123,255,.12) inset;
}
.bubble.assistant {
  background: linear-gradient(180deg, rgba(178,123,255,.12), rgba(255,179,230,.08));
  border-color: rgba(178,123,255,.35); margin-right: auto;
}
.bubble.user {
  background: linear-gradient(180deg, rgba(35,28,45,.55), rgba(27,23,35,.55));
  border-color: rgba(178,123,255,.18); margin-left: auto;
}

.chat-empty { margin: 24px auto 10px; text-align: center; color: var(--muted); font-size: 1.05rem; }

/* Composer */
.composer { position: sticky; bottom: 0; left: 0; right: 0; display: flex; justify-content: center; padding: 0.75rem; border-top: 1px solid var(--border); background: linear-gradient(180deg, rgba(20,18,26,.8), rgba(20,18,26,.95)); }
.composer-inner { width: min(820px, 92vw); }
.composer-box { display: grid; grid-template-columns: auto 1fr auto; gap: 0.5rem; align-items: center; background: var(--panel); border: 1px solid var(--border); border-radius: 16px; padding: 0.5rem; }
.icon-btn { width: 36px; height: 36px; border-radius: 10px; border: 1px solid var(--border); background: linear-gradient(180deg, var(--panel), var(--panel-2)); display: inline-flex; align-items: center; justify-content: center; color: var(--text); cursor: pointer; transition: transform .05s ease, border-color .15s ease; }
.icon-btn:hover { border-color: var(--accent-3); }
.icon-btn:active { transform: translateY(1px); }
.textarea { width: 100%; background: transparent; border: none; outline: none; resize: none; overflow: hidden; color: var(--text); padding: 0.35rem 0.25rem; font: inherit; }

/* Modals */
.modal__backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.55); display: grid; place-items: center; z-index: 20; }
.modal { width: min(520px, 92vw); background: linear-gradient(180deg, var(--panel), var(--panel-2)); border: 1px solid var(--border); border-radius: 1rem; padding: 1rem; }

/* Responsive */
@media (max-width: 860px) {
  .composer-inner { width: min(720px, 94vw); }
}
@media (max-width: 640px) {
  .layout { grid-template-columns: 1fr; }
  .sidebar { display: none; }
  .composer-inner { max-width: 100%; }
}
@media (max-width: 480px) {
  .composer-inner { width: 96vw; }
  .topbar__title { font-size: 1rem; }
}
